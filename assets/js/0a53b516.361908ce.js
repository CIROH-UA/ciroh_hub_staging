"use strict";(self.webpackChunkciroh_docuhub=self.webpackChunkciroh_docuhub||[]).push([["5925"],{96941(e,s,a){a.r(s),a.d(s,{fetchTotal:()=>g,default:()=>y});var t=a(74848),l=a(96540),r=a(21767),i=a(48220),n=a(34164),c=a(83941),o=a(9526),d=a(97909);let u="metaItem_caT1",h={journalArticle:"\u{1F4C4}",conferencePaper:"\u{1F3A4}",report:"\u{1F4CB}",book:"\u{1F4D6}",thesis:"\u{1F393}",dataset:"\u{1F4CA}"};function m({publication:e,index:s}){let{colorMode:a}=(0,c.G)();if(!e)return null;let{title:l="Untitled Publication",creators:r=[],date:i,url:o,itemType:m,publicationTitle:x,DOI:j,abstractNote:p,tags:v=[]}=e,N=r.length>0?r.slice(0,3).map(e=>e.lastName||e.name||"Anonymous").join(", ")+(r.length>3?` +${r.length-3} more`:""):"No authors listed",_=i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No date",f=h[m]||"\u{1F4C4}";return(0,t.jsx)(()=>(0,t.jsxs)("div",{className:(0,n.A)("publicationCard_oFfa","dark"===a&&"cardDark_yEPF","slideUp_z7hW"),style:{animationDelay:`${.05*s}s`},children:[(0,t.jsxs)("div",{className:"cardHeader_WI3d",children:[(0,t.jsxs)("div",{className:"typeBadge_qgus",children:[(0,t.jsx)("span",{className:"typeIcon_dwEE",children:f}),(0,t.jsx)("span",{className:"typeText_i2T1",children:m.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z])([A-Z][a-z])/g,"$1 $2").replace(/([a-z])([0-9])/g,"$1 $2").replace(/([0-9])([a-z])/g,"$1 $2")})]}),o&&(0,t.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"externalLink_kNfl",title:"Open publication",children:(0,t.jsx)(d.Dus,{size:18})})]}),(0,t.jsx)("h3",{className:"cardTitle_uwnL",children:l}),(0,t.jsx)("div",{className:"authorsSection_intc",children:(0,t.jsx)("p",{className:"authors__xg_",children:N})}),(0,t.jsxs)("div",{className:"metaInfo_kVdx",children:[(0,t.jsxs)("div",{className:u,children:[(0,t.jsx)(d.a9f,{size:14}),(0,t.jsx)("span",{children:_})]}),x&&(0,t.jsxs)("div",{className:u,children:[(0,t.jsx)(d.aFU,{size:14}),(0,t.jsx)("span",{className:"journal_fkc4",children:x})]})]}),p&&(0,t.jsx)("div",{className:"abstractPreview_xVBY",children:(0,t.jsxs)("p",{children:[p.substring(0,150),"..."]})}),v.length>0&&(0,t.jsxs)("div",{className:"tagsContainer_B7mg",children:[v.slice(0,3).map((e,s)=>(0,t.jsx)("span",{className:"tag_h27n",children:"string"==typeof e?e:e.tag},s)),v.length>3&&(0,t.jsxs)("span",{className:"moreTag_IPfY",children:["+",v.length-3]})]}),j&&(0,t.jsx)("a",{href:`https://doi.org/${j}`,target:"_blank",rel:"noopener noreferrer",className:"doiLink_nIeh",children:"View DOI \u2192"}),o&&(0,t.jsxs)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"ctaButton_xt2y",children:["Read Publication",(0,t.jsx)(d.Dus,{size:16})]})]}),{})}let x="skeletonMetaItem_NXIC",j="skeletonTag_qcY6";function p(){return(0,t.jsxs)("div",{className:(0,n.A)("skeletonCard_eexg","shimmer_LXQ0"),children:[(0,t.jsxs)("div",{className:"skeletonHeader_eyfv",children:[(0,t.jsx)("div",{className:"skeletonBadge_kIfL"}),(0,t.jsx)("div",{className:"skeletonIcon_KRnz"})]}),(0,t.jsx)("div",{className:"skeletonTitle_OEQ5"}),(0,t.jsx)("div",{className:"skeletonAuthors___ni"}),(0,t.jsxs)("div",{className:"skeletonMeta_TFVG",children:[(0,t.jsx)("div",{className:x}),(0,t.jsx)("div",{className:x})]}),(0,t.jsxs)("div",{className:"skeletonAbstract_T8iY",children:[(0,t.jsx)("div",{}),(0,t.jsx)("div",{})]}),(0,t.jsxs)("div",{className:"skeletonTags_AH2j",children:[(0,t.jsx)("div",{className:j}),(0,t.jsx)("div",{className:j}),(0,t.jsx)("div",{className:j})]}),(0,t.jsx)("div",{className:"skeletonButton_Cv4S"})]})}let v="filterGroup_c8np",N="filterSelect_Y6Z5",_="4961866",f="YOURKEY";async function g(e,s,a,t=""){let l=t?`/collections/${t}/items/top`:"/items/top",r=new URL(`https://api.zotero.org/groups/${e}${l}`);Object.entries({...a,limit:1}).forEach(([e,s])=>r.searchParams.append(e,s));let i=await fetch(r.href,{headers:{"Zotero-API-Key":s}});if(!i.ok)return null;let n=i.headers.get("Total-Results");return n?Number(n):null}function b(){let{colorMode:e}=(0,c.G)(),s=(0,l.useMemo)(()=>new i.default(f).library("group",_),[]),[a,r]=(0,l.useState)([]),[o,u]=(0,l.useState)(0),[h,x]=(0,l.useState)(!0),[j,b]=(0,l.useState)(!1),[y,k]=(0,l.useState)(null),T=(0,l.useRef)(!1),[w,C]=(0,l.useState)(null),[A,S]=(0,l.useState)(""),[I,R]=(0,l.useState)(""),[F,D]=(0,l.useState)("all"),[P,$]=(0,l.useState)("date"),[z,B]=(0,l.useState)("desc"),[O,L]=(0,l.useState)(!1),E=(0,l.useRef)(null),U=null,G=(0,l.useCallback)(async()=>{let e={sort:P,direction:z,...I?{q:I}:{},..."all"!==F?{itemType:F}:{}};try{C(await g(_,f,e,""))}catch(e){console.error("Total-Results header error:",e),C(null)}},[I,F,P,z]),Y=(0,l.useCallback)(async e=>{if(!T.current){T.current=!0,b(!0),k(null);try{let a={sort:P,direction:z,start:50*e,limit:50,...I?{q:I}:{},..."all"!==F?{itemType:F}:{}},t=(await s.items().top().get(a)).map(e=>({key:e.key,title:e.title||"Untitled",creators:e.creators||[],date:e.date||"No date",url:e.url||e.DOI?`https://doi.org/${e.DOI}`:null,itemType:e.itemType||"document",publicationTitle:e.publicationTitle||"",DOI:e.DOI||"",abstractNote:e.abstractNote||"",tags:e.tags||[]}));r(s=>0===e?t:[...s,...t]),u(e),x(50===t.length)}catch(e){console.error("Error loading publications:",e),k(e.message||"Failed to load publications. Please try again later.")}finally{T.current=!1,b(!1)}}},[s,I,F,P,z]),M=(e,s)=>{"itemType"===e&&D(s),"sort"===e&&$(s),"direction"===e&&B(s),r([]),u(0),x(!0)},H=(0,l.useCallback)(()=>{if(!E.current||!h||j||T.current)return;let{scrollTop:e,clientHeight:s,scrollHeight:a}=E.current;a-e-s<200&&Y(o+1)},[h,j,o,Y]);(0,l.useEffect)(()=>{Y(0),G()},[I,F,P,z]),(0,l.useEffect)(()=>(window.addEventListener("scroll",H),()=>window.removeEventListener("scroll",H)),[H]),(0,l.useEffect)(()=>{0!==a.length||j||Y(0)},[]);let W=I||"all"!==F;return(0,t.jsxs)("main",{className:(0,n.A)("wrapper_Sfvv","tw-bg-white dark:tw-bg-slate-900"),children:[(0,t.jsx)("div",{className:(0,n.A)("heroBanner_fWoZ","tw-bg-gradient-to-r tw-from-cyan-500 tw-to-blue-500"),children:(0,t.jsxs)("div",{className:"heroContent_T19L",children:[(0,t.jsx)("h1",{className:"heroTitle_vcUr",children:"CIROH Research Publications"}),(0,t.jsx)("p",{className:"heroSubtitle_huRa",children:"Discover peer-reviewed research, reports, and scientific contributions from CIROH and its collaborators"})]})}),(0,t.jsxs)("div",{className:(0,n.A)("container_juMF","tw-px-4"),children:[(0,t.jsxs)("div",{className:(0,n.A)("searchFilterSection_be43","dark"===e&&"darkMode_rnR_"),children:[(0,t.jsxs)("div",{className:"searchBar_WL46",children:[(0,t.jsx)(d.oF9,{className:"searchIcon_I5Ce"}),(0,t.jsx)("input",{type:"text",placeholder:"Search publications by title, authors, or keywords...",value:A,onChange:e=>{let s=e.target.value;S(s),clearTimeout(U),U=setTimeout(()=>{R(s),r([]),u(0),x(!0)},1e3)},className:"searchInput_C65t","aria-label":"Search publications"}),A&&(0,t.jsx)("button",{onClick:()=>{S(""),R(""),r([])},className:"clearBtn_vnwj","aria-label":"Clear search",children:(0,t.jsx)(d.Mz4,{})})]}),(0,t.jsxs)("div",{className:"headerRow_mnQg",children:[(0,t.jsxs)("button",{className:(0,n.A)("filterToggle_BNeU",O&&"active_ymRC"),onClick:()=>L(!O),children:[(0,t.jsx)(d.syA,{size:18}),"Filters"]}),null!==w&&(0,t.jsxs)("div",{className:"resultCount_JifF",children:[w," publication",1!==w?"s":""," found"]})]}),O&&(0,t.jsx)("div",{className:(0,n.A)("filtersPanel_FBLs","slideIn_M2LW"),children:(0,t.jsxs)("div",{className:"filterRow_w_uX",children:[(0,t.jsxs)("div",{className:v,children:[(0,t.jsx)("label",{htmlFor:"itemType",children:"Publication Type"}),(0,t.jsxs)("select",{id:"itemType",value:F,onChange:e=>M("itemType",e.target.value),className:N,children:[(0,t.jsx)("option",{value:"all",children:"All Types"}),(0,t.jsx)("option",{value:"journalArticle",children:"Journal Article"}),(0,t.jsx)("option",{value:"conferencePaper",children:"Conference Paper"}),(0,t.jsx)("option",{value:"report",children:"Report"}),(0,t.jsx)("option",{value:"book",children:"Book"}),(0,t.jsx)("option",{value:"thesis",children:"Thesis"}),(0,t.jsx)("option",{value:"dataset",children:"Dataset"})]})]}),(0,t.jsxs)("div",{className:v,children:[(0,t.jsx)("label",{htmlFor:"sortType",children:"Sort By"}),(0,t.jsxs)("select",{id:"sortType",value:P,onChange:e=>M("sort",e.target.value),className:N,children:[(0,t.jsx)("option",{value:"date",children:"Date"}),(0,t.jsx)("option",{value:"title",children:"Title"}),(0,t.jsx)("option",{value:"creator",children:"Author"})]})]}),(0,t.jsxs)("div",{className:v,children:[(0,t.jsx)("label",{htmlFor:"sortDirection",children:"Order"}),(0,t.jsxs)("button",{id:"sortDirection",className:"sortButton_p4Fe",onClick:()=>M("direction","desc"===z?"asc":"desc"),children:["desc"===z?(0,t.jsx)(d.UOv,{size:20}):(0,t.jsx)(d.y1N,{size:20}),"desc"===z?"Newest":"Oldest"]})]}),W&&(0,t.jsx)("button",{className:"clearFiltersBtn_AG3G",onClick:()=>{S(""),R(""),D("all"),$("date"),B("desc"),r([]),u(0),x(!0)},children:"Clear All Filters"})]})})]}),(0,t.jsxs)("div",{className:"publicationsGrid_LuPA",ref:E,children:[y&&(0,t.jsx)("div",{className:"errorContainer_WNG1",children:(0,t.jsx)("p",{className:"error_KKqt",children:y})}),0===a.length&&!j&&!y&&(0,t.jsx)("div",{className:"emptyState_DtvG",children:(0,t.jsx)("p",{children:"No publications found. Try adjusting your search or filters."})}),a.map((e,s)=>(0,t.jsx)(m,{publication:e,index:s},e.key)),j&&(0,t.jsx)(t.Fragment,{children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)(p,{},`skeleton-${s}`))})]}),a.length>0&&!h&&!j&&(0,t.jsx)("div",{className:"endMessage_YyQi",children:(0,t.jsx)("p",{children:"You've reached the end of publications. \u{1F389}"})})]})]})}function y(){return(0,t.jsx)(r.A,{title:"Publications",description:"CIROH Research Publications",children:(0,t.jsx)(o.A,{children:()=>(0,t.jsx)(b,{})})})}}}]);